Why your AuthGuard might not be firing at all

If:

you see the user avatar in nav â†’ context does work

but AuthGuard shows no console logs and always redirects
then the most likely causes are:

AuthGuard is not mounted at all

Wrong placement in the tree (e.g. wrapped inside a server component that never renders client children).

Or you forgot 'use client' at the top of AuthGuard.

useEffect not running

If the component never mounts (see above).

Or if it throws during render before reaching useEffect.

Mismatch of context providers

You might be using two different React trees (e.g. AuthProvider declared in layout.tsx but not actually wrapping your protected route). Then useAuth() returns the default context (empty state), so your guard thinks user = null.

Redirect happening before logs

If youâ€™re calling redirect() (Next.js server action) instead of router.push() inside useEffect, logs wonâ€™t show because redirect short-circuits the render.

Debugging steps Iâ€™d recommend

Confirm the guard mounts

'use client';
export default function AuthGuard({ children }) {
  console.log("AuthGuard rendered");
  const { user, isAuthenticated } = useAuth();
  useEffect(() => {
    console.log("AuthGuard useEffect", { user, isAuthenticated });
  }, [user, isAuthenticated]);
  return children;
}


If you donâ€™t see "AuthGuard rendered", it never mounted.

Verify placement

Is AuthGuard imported in a client component only?

Is it inside the same AuthProvider as your nav?

Check for duplicate providers

Put console.log("AuthProvider mounted") in your provider.

If you see it twice, youâ€™ve got multiple providers â†’ two different context values.

Confirm router behavior

If using redirect() from next/navigation, that runs on the server and wonâ€™t show client logs. Use router.push() from next/navigation in useEffect for client guards.

Minimal repro
Try making a test page with only:

export default function ProtectedPage() {
  return <AuthGuard> <div>secret stuff</div> </AuthGuard>
}


This cuts out layout/nav complexity.

ðŸ‘‰ My hunch: your AuthGuard isnâ€™t actually mounting because itâ€™s either missing 'use client' or being rendered in a server component tree. That would explain no logs + forced redirect.